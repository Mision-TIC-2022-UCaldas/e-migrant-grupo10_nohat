@page "/movies/create"
@using proyFinal_g63.Client.Pages.Components
@inject NavigationManager navigationManager
@inject IServiceMovie movie_i


<FormMovie Movie = "Movie" OnValidSubmit = "Create"></FormMovie>

@code{

    private Movie Movie = new Movie();

    
    async void Create(){
        

        var httpResponse = await movie_i.Post("api/movies", Movie);
        //El evento enviar dispara esta tarea
        if(httpResponse.Error)
        {
            var body = await httpResponse.HttpResponseMessage.Content.ReadAsStringAsync();
            Console.WriteLine(body);
        }
        else
        {
            navigationManager.NavigateTo("/cargaexitosa");
            Console.WriteLine(Movie.Name);
        }

    }
}

